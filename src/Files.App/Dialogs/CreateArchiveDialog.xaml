<ContentDialog
	x:Class="Files.App.Dialogs.CreateArchiveDialog"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:converters="using:Files.App.Converters"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:helpers="using:Files.App.Helpers"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:settings="using:Files.App.UserControls.Settings"
	Title="{helpers:ResourceString Name=CreateArchive}"
	d:DesignHeight="300"
	d:DesignWidth="400"
	CloseButtonText="{helpers:ResourceString Name=Cancel}"
	Closing="ContentDialog_Closing"
	CornerRadius="{StaticResource OverlayCornerRadius}"
	DefaultButton="Primary"
	IsPrimaryButtonEnabled="True"
	Loaded="ContentDialog_Loaded"
	PrimaryButtonText="{helpers:ResourceString Name=Create}"
	RequestedTheme="{x:Bind helpers:ThemeHelper.RootTheme}"
	Style="{StaticResource DefaultContentDialogStyle}"
	mc:Ignorable="d">

	<ContentDialog.Resources>
		<ResourceDictionary>
			<converters:VisibilityInvertConverter x:Key="VisibilityInvertConverter" />
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="/ResourceDictionaries/RightAlignedToggleSwitchStyle.xaml" />
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</ContentDialog.Resources>

	<StackPanel Spacing="24" Padding="0,8,0,0">

		<Grid ColumnSpacing="8">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>

			<TextBox
				x:Name="FileNameBox"
				Width="340"
				VerticalAlignment="Bottom"
				Header="{helpers:ResourceString Name=ArchiveName}"
				PlaceholderText="{helpers:ResourceString Name=EnterName}"
				Text="{x:Bind FileName, Mode=TwoWay}" />
			<ComboBox
				x:Name="FileFormatSelector"
				Grid.Column="1"
				MinWidth="100"
				VerticalAlignment="Bottom"
				ItemsSource="{x:Bind FileFormats}"
				SelectedValue="{x:Bind FileFormat, Mode=TwoWay}"
				SelectedValuePath="Key"
				SelectionChanged="FileFormatSelector_SelectionChanged">
				<ComboBox.ItemTemplate>
					<DataTemplate>
						<Grid ColumnSpacing="24">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="*" />
							</Grid.ColumnDefinitions>
							<TextBlock Text="{Binding Label}" />
							<TextBlock
							Grid.Column="1"
							VerticalAlignment="Bottom"
							FontSize="12"
							FontWeight="Light"
							Text="{Binding Description}"
							TextWrapping="Wrap"
							Visibility="{Binding IsDropDownOpen, ElementName=FileFormatSelector}" />
						</Grid>
					</DataTemplate>
				</ComboBox.ItemTemplate>
			</ComboBox>
		</Grid>

		<StackPanel Spacing="4">
			<settings:SettingsBlockControl
				Padding="-24,4,20,4"
				Title="{helpers:ResourceString Name=DoNotCompress}"
				HorizontalAlignment="Stretch">
				<ToggleSwitch
					x:Name="DoNotCompressSwitch"
					HorizontalAlignment="Right"
					IsOn="{x:Bind DoNotCompress, Mode=TwoWay}"
					Style="{StaticResource RightAlignedToggleSwitchStyle}" />
			</settings:SettingsBlockControl>
			<settings:SettingsBlockControl
				x:Name="SplittingSizeLayout"
				Padding="-24,4,20,4"
				HorizontalAlignment="Stretch"
				Title="{helpers:ResourceString Name=SplittingSize}"
				Visibility="Collapsed">
				<ComboBox
					x:Name="SplittingSizeSelector"
					HorizontalAlignment="Right"
					DisplayMemberPath="Label"
					ItemsSource="{x:Bind SplittingSizes}"
					SelectedValue="{x:Bind SplittingSize, Mode=TwoWay}"
					SelectedValuePath="Key" />
			</settings:SettingsBlockControl>
			<StackPanel>
				<settings:SettingsBlockControl
					Padding="-24,4,20,4"
					HorizontalAlignment="Stretch"
					Title="{helpers:ResourceString Name=Encryption}">
					<ToggleSwitch
						x:Name="EncryptionSwitch"
						HorizontalAlignment="Right"
						Style="{StaticResource RightAlignedToggleSwitchStyle}"
						Toggled="EncryptionSwitch_Toggled" />
				</settings:SettingsBlockControl>
				<Grid
					x:Name="PasswordLayout"
					HorizontalAlignment="Stretch"
					x:Load="False"
					Background="{StaticResource ExpanderDropDownBackground}"
					BorderBrush="{StaticResource ExpanderDropDownBorderBrush}"
					BorderThickness="{StaticResource ExpanderDropdownDownBorderThickness}"
					CornerRadius="{StaticResource ControlCornerRadius}"
					Visibility="{Binding IsOn, ElementName=EncryptionSwitch, Mode=OneWay}">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>
					<TextBlock
						Margin="36,0,0,0"
						VerticalAlignment="Center"
						Text="{helpers:ResourceString Name=Password}" />
					<PasswordBox
						x:Name="PasswordBox"
						Grid.Column="1"
						MinWidth="160"
						MaxWidth="280"
						Margin="16,8"
						HorizontalAlignment="Right"
						IsPasswordRevealButtonEnabled="True"
						Password="{x:Bind Password, Mode=TwoWay}"
						PasswordChanging="PasswordBox_PasswordChanging"
						PasswordRevealMode="Peek"
						PlaceholderText="{helpers:ResourceString Name=Password}" />
				</Grid>
			</StackPanel>
		</StackPanel>

	</StackPanel>

</ContentDialog>
