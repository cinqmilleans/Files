<ContentDialog
	x:Class="Files.App.Dialogs.CreateArchiveDialog"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:converters="using:Files.App.Converters"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:helpers="using:Files.App.Helpers"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:settings="using:Files.App.UserControls.Settings"
	Title="{helpers:ResourceString Name=CreateArchive}"
	d:DesignHeight="300"
	d:DesignWidth="400"
	CloseButtonText="{helpers:ResourceString Name=Cancel}"
	Closing="ContentDialog_Closing"
	CornerRadius="{StaticResource OverlayCornerRadius}"
	DefaultButton="Primary"
	IsPrimaryButtonEnabled="True"
	Loaded="ContentDialog_Loaded"
	PrimaryButtonText="{helpers:ResourceString Name=Create}"
	RequestedTheme="{x:Bind helpers:ThemeHelper.RootTheme}"
	Style="{StaticResource DefaultContentDialogStyle}"
	mc:Ignorable="d">

	<ContentDialog.Resources>
		<ResourceDictionary>
			<Style x:Key="GridSettingStyle" TargetType="Grid">
				<Setter Property="Background" Value="{ThemeResource ExpanderHeaderBackground}" />
				<Setter Property="BorderBrush" Value="{ThemeResource ExpanderHeaderBorderBrush}" />
				<Setter Property="BorderThickness" Value="{ThemeResource ExpanderHeaderBorderThickness}" />
				<Setter Property="HorizontalAlignment" Value="Stretch" />
				<Setter Property="Padding" Value="-24,4,20,4" />
				<Setter Property="MinHeight" Value="{StaticResource ExpanderMinHeight}" />
				<Setter Property="CornerRadius" Value="{ThemeResource ControlCornerRadius}" />
			</Style>

			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="/ResourceDictionaries/RightAlignedToggleSwitchStyle.xaml" />
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</ContentDialog.Resources>

	<StackPanel Padding="0,8,0,0" Spacing="24">

		<Grid ColumnSpacing="8">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>

			<TextBox
				x:Name="FileNameBox"
				Width="340"
				VerticalAlignment="Bottom"
				Header="{helpers:ResourceString Name=ArchiveName}"
				PlaceholderText="{helpers:ResourceString Name=EnterName}"
				Text="{x:Bind ViewModel.FileName, Mode=TwoWay}" />
			<ComboBox
				x:Name="FileFormatSelector"
				Grid.Column="1"
				MinWidth="100"
				VerticalAlignment="Bottom"
				ItemsSource="{x:Bind ViewModel.FileFormats}"
				SelectedItem="{x:Bind ViewModel.FileFormat, Mode=TwoWay}"
				SelectedValuePath="Key">
				<ComboBox.ItemTemplate>
					<DataTemplate>
						<Grid ColumnSpacing="24">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="*" />
							</Grid.ColumnDefinitions>
							<TextBlock Text="{Binding Label}" />
							<TextBlock
								Grid.Column="1"
								VerticalAlignment="Bottom"
								FontSize="12"
								FontWeight="Light"
								Text="{Binding Description}"
								TextWrapping="Wrap"
								Visibility="{Binding IsDropDownOpen, ElementName=FileFormatSelector}" />
						</Grid>
					</DataTemplate>
				</ComboBox.ItemTemplate>
			</ComboBox>
		</Grid>

		<StackPanel Spacing="4">
			<Grid Style="{StaticResource GridSettingStyle}">
				<settings:SettingsDisplayControl Title="{helpers:ResourceString Name=CompressionLevel}" HorizontalAlignment="Stretch">
					<ComboBox
						x:Name="CompressionLevelSelector"
						HorizontalAlignment="Right"
						DisplayMemberPath="Label"
						ItemsSource="{x:Bind ViewModel.CompressionLevels}"
						SelectedItem="{x:Bind ViewModel.CompressionLevel, Mode=TwoWay}"
						SelectedValuePath="Key" />
				</settings:SettingsDisplayControl>
			</Grid>
			<Grid
				x:Name="SplittingSizeLayout"
				x:Load="{x:Bind ViewModel.CanSplit, Mode=OneWay}"
				Style="{StaticResource GridSettingStyle}">
				<settings:SettingsDisplayControl Title="{helpers:ResourceString Name=SplittingSize}" HorizontalAlignment="Stretch">
					<ComboBox
						x:Name="SplittingSizeSelector"
						HorizontalAlignment="Right"
						DisplayMemberPath="Label"
						ItemsSource="{x:Bind ViewModel.SplittingSizes}"
						SelectedItem="{x:Bind ViewModel.SplittingSize, Mode=TwoWay}"
						SelectedValuePath="Key" />
				</settings:SettingsDisplayControl>
			</Grid>
			<StackPanel>
				<Grid Style="{StaticResource GridSettingStyle}">
					<settings:SettingsDisplayControl
						Title="{helpers:ResourceString Name=Encryption}"
						Padding="-24,4,20,4"
						HorizontalAlignment="Stretch">
						<ToggleSwitch
							x:Name="EncryptionSwitch"
							HorizontalAlignment="Right"
							IsOn="{x:Bind ViewModel.UseEncryption, Mode=TwoWay}"
							Style="{StaticResource RightAlignedToggleSwitchStyle}" />
					</settings:SettingsDisplayControl>
				</Grid>
				<Grid
					x:Name="PasswordLayout"
					HorizontalAlignment="Stretch"
					x:Load="{x:Bind ViewModel.UseEncryption, Mode=OneWay}"
					Background="{StaticResource ExpanderDropDownBackground}"
					BorderBrush="{StaticResource ExpanderDropDownBorderBrush}"
					BorderThickness="{StaticResource ExpanderDropdownDownBorderThickness}"
					CornerRadius="{StaticResource ControlCornerRadius}">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>
					<TextBlock
						Margin="36,0,0,0"
						VerticalAlignment="Center"
						Text="{helpers:ResourceString Name=Password}" />
					<PasswordBox
						x:Name="PasswordBox"
						Grid.Column="1"
						MinWidth="160"
						MaxWidth="280"
						Margin="16,8"
						HorizontalAlignment="Right"
						IsPasswordRevealButtonEnabled="True"
						Loading="PasswordBox_Loading"
						Password="{x:Bind ViewModel.Password, Mode=TwoWay}"
						PasswordRevealMode="Peek"
						PlaceholderText="{helpers:ResourceString Name=Password}" />
				</Grid>
			</StackPanel>
		</StackPanel>

	</StackPanel>

</ContentDialog>
